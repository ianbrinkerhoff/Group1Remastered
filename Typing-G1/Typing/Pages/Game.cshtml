@page
@model Typing.Pages.GameModel
@{
}
    <div id="gameScreen">
        <div class="left" id="p1">
            <h2>P1</h2>
                <div class="wordBox1 1" style="top:70px"><p id="1"></p></div>
                <div class="wordBox1 2" style="top:150px"><p id="2"></p></div>
                <div class="wordBox1 3" style="top:230px"><p id="3"></p></div> 
                <div class="wordBox1 4" style="top:310px"><p id="4"></p></div> 
                <div class="wordBox1 5" style="top:390px"><p id="5"></p></div>
                <form id="user1" autocomplete="off">
                    <input type="text" name="user1" id="tb1" value="" />
                </form>   
        </div>

        <div class="right" id="p2">
            <h2>P2</h2>
            <div class="wordBox 1" style="top:70px"><p id="6"></p></div>
            <div class="wordBox 2" style="top:150px"><p id="7"></p></div>
            <div class="wordBox 3" style="top:230px"><p id="8"></p></div>
            <div class="wordBox 4" style="top:310px"><p id="9"></p></div>
            <div class="wordBox 5" style="top:390px"><p id="10"></p></div>
            <form id="user2" autocomplete="off">
                <input type="text" name="user2" id="tb2" value="" />
            </form>
        </div>
    </div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<script>

    var count = 6;
    var arr = ["BASEBALL", "RACECAR", "CACTUS", "SAMURAI", "CAT", "WORD", "BUG", "DINOSAUR", "COMPUTER", "TYPING",
        "BASEBALL", "RACECAR", "CACTUS", "SAMURAI", "CAT", "WORD", "BUG", "DINOSAUR", "COMPUTER", "TYPING",
        "BASEBALL", "RACECAR", "CACTUS", "SAMURAI", "CAT", "WORD", "BUG", "DINOSAUR", "COMPUTER", "TYPING",
        "BASEBALL", "RACECAR", "CACTUS", "SAMURAI", "CAT", "WORD", "BUG", "DINOSAUR", "COMPUTER", "TYPING"
    ];

//on click populate p's with words
    $('#p1').click(function () {
        var x = 0;
        $("p").each(function () {
            $(this).text(arr[x]);
            x++;
            if (x >= 5) {
                x = 0;
            }
        });
    });

//PLAYER 1 SIDE USING ANIMATE
    $('#p1').click(function () {

        var $div = $('#p1'),
            docWidth = $div.width(),
            num = 0;
            

        $('#user1').css({
            'left': (docWidth / 2) - 100 + 'px',
            'visibility': 'visible'
        });

        $('#user2').css({
            'left': ((docWidth / 2) + docWidth) - 100 + 'px',
            'visibility': 'visible'
        });

        var color = setInterval(function () {
            num++;
            $.each($('#p1'), function (i, left) {
                $('div', left).each(function () {
                    if (num == 1) {
                        $(this).css({
                            'color': 'orange'
                        });
                    } else if (num == 2) {
                        $(this).css({
                            'color': 'red'
                        });
                        clearInterval(color);
                    }
                });
            })
        }, 6666);


        $.each($('#p1'), function (i, left) {
            $('div', left).each(function () {
                $(this).css({
                    'position': 'absolute'
                });

                $(this).animate({ left: (docWidth - 100) + 'px' }, 20000);

            });
        })
    });


//PLAYER 2 SIDE USING ANIMATE
    $('#p1').click(function () {

        var $div = $('#gameScreen'),
            fullWidth = $div.width(),
            num = 0;

        var color = setInterval(function () {
            num++;
            $.each($('#p2'), function (i, left) {
                $('div', left).each(function () {
                    if (num == 1) {
                        $(this).css({
                            'color': 'orange'
                        });
                    } else if (num == 2) {
                        $(this).css({
                            'color': 'red'
                        });
                        clearInterval(color);
                    }
                });
            }) 
        }, 6666);

       
        $.each($('#p2'), function (i, left) {
            $('div', left).each(function () {
                $(this).css({
                    'position': 'absolute'

                });

                $(this).animate({ left: (fullWidth - 100) + 'px' }, 20000);

            });
        })  
    });

//When player hits a key, it compares substring to words on players screen
    $('#tb1').keyup(function () {
        var substring = $('#tb1').val().toUpperCase();
        var $div = $('#p1'),
            docWidth = $div.width()
        $('.wordBox1').each(function () {
            var string = $(this).text();
            if (string == substring) {
                $('#tb1').val('');
                $(this).text(arr[count]);
                count++;
                $(this).stop(true).css({
                    "position": "absolute",
                    "left": "-50px",
                    "text-align": "right"
                });
                if (count < 10) {
                    $(this).animate({ left: (docWidth - 100) + 'px' }, 20000);
                } else if (count < 20) {
                    $(this).animate({ left: (docWidth - 100) + 'px' }, 17000);
                } else if (count < 30) {
                    $(this).animate({ left: (docWidth - 100) + 'px' }, 15000);
                } else {
                    $(this).animate({ left: (docWidth - 100) + 'px' }, 13000);
                }
            }
            else if (string.startsWith(substring)) {
                $(this).html(
                    '<b>' + string.substr(0, substring.length) + '</b>' + string.substr(substring.length)
                )
            } else {
                $(this).css({
                    "font-weight": "normal",
                    "font-size": "16px"
                });
            }
        });
    });

//Compares substring to everyword in array
    function arrCompare(substring) {
        

        return;
    }


</script>

<style>

    /* Control the left side */
    .left {
        width: 50%;
        float: left;
        background-color: whitesmoke;
        min-height: 100%;
        margin:0;
    }

    /* Control the right side */
    .right {
        width: 50%;
        float: right;
        background-color: lightgray;
        min-height: 100%;
        margin: 0;
    }

    html, body {
        height: 100%;
        margin: 0;
    }

    body {
        overflow:hidden;
        background-color: white;
        margin: 0 auto;
        position: relative;
        width: 100%;
        height: 100%;
    }

    header {
        display: block;
        width: 100%;
        height: 54px;
    }

    #gameScreen {
        border: 1px black solid;
        width: 100%;
        position: absolute;
        top: 54px;
        bottom: 60px;
        left: 0;
    }

    h2 {
        text-align: left;
    }

    .wordBox, .wordBox1{
        height: 50px;
        width: 100px;
        margin: 5px;
        color:green;
    }

    #finalMsg{
        visibility:collapse;
    }

    p{
        text-align:left;
        margin:auto;
    }

    #p1, #p2{
        
    }

    #user1, #user2{
        position: absolute;
        bottom:0px;
        visibility:hidden;
    }

</style>